syntax = "proto3";

package nekzabirov.igambling.v1;

option java_package = "com.nekzabirov.igambling.proto.service";
option java_multiple_files = true;

import "dto/provider.dto.proto";
import "dto/empty.result.proto";
import "dto/game.dto.proto";
import "dto/collection.dto.proto";
import "dto/game_variant.dto.proto";
import "dto/platformType.dto.proto";

service Game {
  rpc List (ListGameCommand) returns (ListGameResult);

  rpc Update (UpdateGameConfig) returns (EmptyResult);

  rpc AddTag (GameTagCommand) returns (EmptyResult);

  rpc RemoveTag (GameTagCommand) returns (EmptyResult);
}

message ListGameCommand {
  string query = 1;

  optional bool active = 2;

  int32 page_number = 3;

  int32 page_size = 4;

  optional bool bonus_bet = 5;

  optional bool bonus_wagering = 6;

  optional bool free_spin_enable = 7;

  optional bool free_chip_enable = 8;

  optional bool jackpot_enable = 9;

  optional bool demo_enable = 10;

  optional bool bonus_buy_enable = 11;

  repeated PlatformType platforms = 12;

  repeated string provider_identity = 13;

  repeated string category_identity = 14;

  repeated string tags = 15;

  optional string player_id = 16;
}

message ListGameResult {
  message Item {
    GameDto game = 1;

    GameVariantDto variant = 2;

    repeated string collectionIds = 3;
  }

  repeated Item items = 1;

  repeated ProviderDto providers = 2;

  repeated CollectionDto collections = 3;

  int32 total_page = 4;
}

message UpdateGameConfig {
  string identity = 1;

  bool active = 2;

  bool bonus_bet = 3;

  bool bonus_wagering = 4;
}

message GameTagCommand {
  string identity = 1;

  string tag = 2;
}